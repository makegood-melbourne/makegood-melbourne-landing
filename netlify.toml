[build]
  command = "npx astro build"
  publish = "dist"

[build.environment]
  NODE_VERSION = "20"

# NOTE: Domain canonicalisation (www vs non-www, http vs https)
# is handled at the hosting/domain level to avoid redirect loops.


# Legacy blog URL redirect (/blogs/* -> /blog/*)
[[redirects]]
  from = "/blogs/*"
  to = "/blog/:splat"
  status = 301
  force = true

# Legacy page redirects
[[redirects]]
  from = "/home"
  to = "/"
  status = 301
  force = true

[[redirects]]
  from = "/about"
  to = "/"
  status = 301
  force = true

[[redirects]]
  from = "/tenants"
  to = "/what-is-make-good"
  status = 301
  force = true

# Legacy service-areas redirect (/service-areas/* -> /areas/*)
[[redirects]]
  from = "/service-areas/*"
  to = "/areas/:splat"
  status = 301
  force = true

# /areas index doesn't exist - redirect to service-areas listing
[[redirects]]
  from = "/areas"
  to = "/service-areas"
  status = 301
  force = true

# Renamed service page redirects
[[redirects]]
  from = "/services/commercial-painting"
  to = "/services/make-good-painting"
  status = 301
  force = true

[[redirects]]
  from = "/services/make-good-cleaning"
  to = "/services/handover-cleaning"
  status = 301
  force = true

# Unpublished service page redirects (services exist in data but not published)
[[redirects]]
  from = "/services/commercial-make-good"
  to = "/capabilities"
  status = 301
  force = true

[[redirects]]
  from = "/services/concrete-floor-repair"
  to = "/services/warehouse-floor-restoration"
  status = 301
  force = true

[[redirects]]
  from = "/services/concrete-slab-restoration"
  to = "/services/warehouse-floor-restoration"
  status = 301
  force = true

[[redirects]]
  from = "/services/warehouse-floor-repairs"
  to = "/services/warehouse-floor-restoration"
  status = 301
  force = true

[[redirects]]
  from = "/services/electrical-make-safe"
  to = "/capabilities"
  status = 301
  force = true

[[redirects]]
  from = "/services/led-lighting"
  to = "/capabilities"
  status = 301
  force = true

# Blog post redirects for renamed/legacy URLs
[[redirects]]
  from = "/blog/year-end-planning-commercial-property"
  to = "/blog/year-end-property-planning"
  status = 301
  force = true

[[redirects]]
  from = "/blog/waste-management-sustainability-commercial-demolition"
  to = "/blog/waste-management-sustainability-make-good-works"
  status = 301
  force = true

[[redirects]]
  from = "/blog/strategic-planning-commercial-makegood"
  to = "/blog/strategic-make-good-planning"
  status = 301
  force = true

[[redirects]]
  from = "/blog/office-strip-out-demolition-best-practices"
  to = "/blog/office-strip-out"
  status = 301
  force = true

[[redirects]]
  from = "/blog/building-defect-remediation-compliance-process"
  to = "/blog/building-defect-remediation-commercial-property"
  status = 301
  force = true

[[redirects]]
  from = "/blog/parapet-failure-emergency-repair-structural-safety"
  to = "/blog/parapet-failure-emergency-building-repairs"
  status = 301
  force = true

[[redirects]]
  from = "/blog/property-transformation-makegood-renovation"
  to = "/blog/love-your-property"
  status = 301
  force = true

[[redirects]]
  from = "/blog/commercial-makegood-complete-guide"
  to = "/blog/what-are-make-goods"
  status = 301
  force = true

[[redirects]]
  from = "/blog/polycarbonate-roofing-replacement-commercial"
  to = "/blog/warehouse-polycarbonate-roofing-replacement"
  status = 301
  force = true

[[redirects]]
  from = "/blog/makegood-services-comprehensive-overview"
  to = "/blog/tenants-guide-smooth-make-good-experience"
  status = 301
  force = true

[[redirects]]
  from = "/blog/painting-commercial-property-makegood-standards"
  to = "/blog/the-importance-of-painting"
  status = 301
  force = true

[[redirects]]
  from = "/blog/warehouse-makegood-industrial-lease-obligations"
  to = "/blog/strategic-make-good-planning"
  status = 301
  force = true

[[redirects]]
  from = "/blog/balcony-waterproofing-membrane-replacement"
  to = "/blog/balcony-waterproofing-preventing-fixing-leaks"
  status = 301
  force = true

[[redirects]]
  from = "/blog/car-park-line-marking-compliance-standards"
  to = "/blog/car-park-repairs-line-marking-make-good"
  status = 301
  force = true

[[redirects]]
  from = "/blog/carpet-tile-replacement-commercial-office"
  to = "/blog/carpet-tile-replacement-installation-floor-preparation"
  status = 301
  force = true

[[redirects]]
  from = "/blog/epoxy-flooring-industrial-applications"
  to = "/blog/restoring-concrete-floors"
  status = 301
  force = true

[[redirects]]
  from = "/blog/commercial-cleaning-services-post-makegood"
  to = "/blog/end-of-lease-cleaning-services"
  status = 301
  force = true

[[redirects]]
  from = "/blog/electrical-make-safe-emergency-response"
  to = "/blog/electrical-make-safe-decommissioning-demolition"
  status = 301
  force = true

[[redirects]]
  from = "/*"
  to = "/404.html"
  status = 404
